
OMS log :   oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/gc_inst/em/EMGC_OMS1/sysman/log/emoms.log

AGNET: /u01/app/oracle/product/12.1.0/agent/agent_inst/sysman/log/emctl.log

emcli add_swlib_storage_location -name=swlib -path=/some/path/on/OMS/server

If you think that the Software Library location has already been configured, just run
 emcli list_swlib_storage_locations

"Error: Required properties are missing: OracleHome" Message is given when Adding a Database on a Windows Platform via EMCLI 12c (Doc ID 1597698.1)

oracle@csmsdc-vmnapp01::/app/oracle/Middleware/oms/bin
$ ./emcli login -username=SYSMAN

$ ./emcli add_target -name="PMJS1" -type="oracle_database" -host="CSMJIM-VODBP05.apac.ent.bhpbilliton.net" -credentials="UserName:dbsnmp;password:oem0racle1;Role:Normal" -properties="SID&PMJS1;Port&1521;OracleHome&"c:\app\oracle\product\11.2.0\dbhome_1";MachineName&CSMJIM-VODBP05" -subseparator=properties="&"
Target "PMJS1:oracle_database" added successfully

$ ./emcli delete_target -name="SMJS1_01" -type="oracle_database"
Target "SMJS1_01:oracle_database" deleted successfully
$ ./emcli delete_target -name="PMJS2_sys" -type="oracle_dbsys"
Target "PMJS2_sys:oracle_dbsys" deleted successfully

oracle@csmsdc-vmnapp01::/app/oracle/Middleware/oms/bin
$ ./emcli delete_target -name="SMJS1" -type="oracle_database"
Target "SMJS1:oracle_database" deleted successfully
oracle@csmsdc-vmnapp01::/app/oracle/Middleware/oms/bin
$ ./emcli add_target -name="SMJS1_01" -type="oracle_database" -host="CSMJIM-VODBP06.apac.ent.bhpbilliton.net" -credentials="UserName:dbsnmp;password:oem0racle1;Role:Normal" -properties="SID&SMJS1;Port&1521;OracleHome&"c:\app\oracle\product\11.2.0\dbhome_1";MachineName&CSMJIM-VODBP06" -subseparator=properties="&"
Target "SMJS1_01:oracle_database" added successfully


Configure Database Instance: Properties




$ ./emcli add_target -name="TMJS1_01" -type="oracle_database" -host="CSMJIM-VODBQ05.apac.ent.bhpbilliton.net" -credentials="UserName:dbsnmp;password:oem0racle1;Role:Normal" -properties="SID&TMJS1;Port&1521;OracleHome&"e:\app\oracle\product\11.2.0\dbhome_1";MachineName&CSMJIM-VODBPQ6" -subseparator=properties="&"
Error: Cannot save the target to the agent
No target type named oracle_database
oracle@csmsdc-vmnapp01::/app/oracle/Middleware/oms/bin
$ ./emcli get_targets -targets="TMJS:%"
Status  Status           Target Type           Target Name
 ID


export JAVA_HOME=/u01/app/oracle/product/middleware/oms
export PATH=$JAVA_HOME/jdk/bin:$PATH
cd $OMS_HOME/bin
./emcli login -username=SYSMAN -password=<sysman_passwd>
$ ./emcli login -username=oem_admin
Enter password

Login successful

./emcli sync
$ ./emcli logout
Logout successful

/u01/app/oracle/product/12.1.0/middleware/oracle_common/sysman/emcli login –username=sysman
[oracle ~]$ emcli login -username=sysman
[oracle ~]$ emcli get_targets

[oracle ~]$ emcli create_blackout -name='Blackout1' -add_targets='em12cr3.example.com:host'\ 
-schedule='frequency:once;duration:3' -reason='Testing'

FOR MULTIPLE DATABASE: -add_targets="db1_name:oracle_database;db2_name:oracle_database" 
UNLIMITED: -schedule="frequency:once;duration:-1"
duration = "-1" then it denotes that unlimited Duration

$ ./emcli create_blackout -name='Blackout1' -add_targets='BHTEST:rac_database' -schedule="frequency:once;duration:-1" -reason='Testing'
Blackout "Blackout1" created successfully

List all blackouts    
$ emcli get_blackouts -name=Blackout_Name
$ emcli get_blackouts -noheader -script | cut -f1

$ emcli get_blackout_details -name='Blackout1'

emcli stop_blackout -name='Blackout1'
emcli delete_blackout -name='Blackout1'

Task: Create Targets    
Adding targets can be painful if EM doesn’t auto-discover them.

Add the “orcl” single-instance database target    
[oracle ~]$ emcli add_target -name='ORCL_DB' \-type='oracle_database' -host='oradb1.example.com' \-properties='SID:orcl;Port:1521;OracleHome:/u01/app/oracle/product/12.1.0/dbhome_1;

MachineName:oradb1-vip.example.com' \

Server Level Blackout
-----------------------
to blackout the server and its associated databases. ( Agent monitors all the databases configured in the server. So placing an agent in blackout is same as below).

##########################
## Server & and its associated databases Blackout
##########################

Use propagate_targets to blackout the host and its associated oracle services (database, agent, asm, etc.)

emcli create_blackout -name="Blackout_Name" -reason="reboot due to memory errors" -add_targets="server01:host" -schedule="duration:-1" -propagate_targets

FOR RAC
----------
 Add RAC database node one    [oracle ~]$ emcli add_target -name='ORCL1_ORCL_RACCLUSTER'\-type='oracle_database' -host='oradb1.example.com' \-properties='SID:orclrac1;Port:1521;OracleHome:/u01/app/oracle/product/12.1.0/dbhome_1;

MachineName:oradb1-vip.example.com' \-credentials='Role:NORMAL;UserName:DBSNMP;password:<password>'Target "ORCL1_ORCL_RACCLUSTER:oracle_database" added successfully

Add RAC database node two    [oracle ~]$ emcli add_target -name='ORCL2_ORCL_RACCLUSTER'\-type='oracle_database' -host='oradb2.example.com' \-properties='SID:orclrac2;Port:1521;OracleHome:/u01/app/oracle/product/12.1.0/dbhome_1;

AGENT
__________
emcli  get_targets –targets="oracle_emd"  –name="name:csv"

emcli stop_agent  -agent=acme_qa:3872 -host_username=oracle
emcli start_agent  -agent=acme_qa:3872 -host_username=oracle
emcli restart_agent  -agent=acme_qa:3872 -host_username=oracle

Agents sometimes fall out of sync with the OMS after patching or as a result of an 
outage and thus require an update to their registration 
information or even an agent synchronization in order to permit uploads

emcli secure_agent  -agent=acme_qa:3872 -host_username=oracle
emcli resecure_agent  -agent=acme_qa:3872 -host_username=oracle
emcli resyncAgent -agent=acme_qa:3872
emcli get_agent_properties -agent_name=acme_qa:3872

FIND The target Name:
> emcli get_targets | grep -i TMJS

Delete the target
exec mgmt_admin.delete_target('target_name','target_type');
exec mgmt_admin.delete_target('DBNAME','oracle_database');
> emcli delete_target –type = "oracle_db_sys" –name="test_sys" –delete_members
ou can also delete individual members, like this:   

 > emcli delete_target –type = "oracle_listener" –name="LSNRDG"
> emcli delete_target –type = "oracle_db_sys" –name="test_sys" –delete_member

SQL> select target_name, target_type, agent_name, agent_type, agent_is_master
from MGMT$AGENTS_MONITORING_TARGETS
where target_name = 'exacel01.localhost.localdomain';
Metric evaluation error start - oracle.sysman.emSDK.agent.fetchlet.exception.FetchletException: em_error=Failed to execute_exadata_response.pl ssh -q -o ConnectTimeout=60 -o BatchMode=yes -o StrictHostKeyChecking=no -o PreferredAuthentications=publickey -i /home/oracle/.ssh/id_dsa -l cellmonitor 10.141.8.68 cellcli -xml -e ' list cell attributes msStatus ':
EM Event: Critical:exacel05.localhost.localdomain - Metric evaluation error start - oracle.sysman.emSDK.agent.fetchlet.exception.FetchletException: em_error=Failed to execute_exadata_response.pl ssh -q -o ConnectTimeout=60 -o BatchMode=yes -o StrictHostKeyChecking=no -o PreferredAuthentications=publickey -i /home/oracle/.ssh/id_dsa -l cellmonitor 10.141.8.68 cellcli -xml -e ' list cell attributes msStatus ':

SQL> select target_name, target_type, agent_name, agent_type, agent_is_master
from MGMT$AGENTS_MONITORING_TARGETS
where target_name = 'exacel05.localhost.localdomain';
 
iorscl01
cluster
iorsdb01-adm.apac.ent.bhpbilliton.net:3872
oracle_emd
              1
---


Looking on the cell secure log we can see that one of the monitoring agents wasn’t  able to connect because of failed publickey authentication:

Oct 23 11:39:54 exacel05 sshd[465]: Connection from 10.141.8.65 port 14594
Oct 23 11:39:54 exacel05 sshd[465]: Failed publickey for cellmonitor from 10.141.8.65 port 14594 ssh2
Oct 23 11:39:54 exacel05 sshd[466]: Connection closed by 10.141.8.65
Oct 23 11:39:55 exacel05 sshd[467]: Connection from 10.141.8.66 port 27799
Oct 23 11:39:55 exacel05 sshd[467]: Found matching DSA key: cf:99:0a:37:1a:e5:84:dc:a8:8a:b9:6f:0c:fd:05:c5
Oct 23 11:39:55 exacel05 sshd[468]: Postponed publickey for cellmonitor from 10.141.8.66 port 27799 ssh2
Oct 23 11:39:55 exacel05 sshd[467]: Found matching DSA key: cf:99:0a:37:1a:e5:84:dc:a8:8a:b9:6f:0c:fd:05:c5
Oct 23 11:39:55 exacel05 sshd[467]: Accepted publickey for cellmonitor from 10.141.8.66 port 27799 ssh2
Oct 23 11:39:55 exacel05 sshd[467]: pam_unix(sshd:session): session opened for user cellmonitor by (uid=0)

That’s confirmed by checking ssh authorized_keys file, which also confirms which were initially configured monitoring agents:
[root@exacel05 .ssh]# grep exadb /home/cellmonitor/.ssh/authorized_keys | cut -d = -f 2
oracle@exadb03.localhost.localdomain
oracle@exadb04.localhost.localdomain

Another way to check which monitoring agent were configured initially is to check the snmpSubscriber attribute for that specific cell:

[root@exacel05 ~]# cellcli -e list cell attributes snmpSubscriber
((host=exadb03.localhost.localdomain,port=3872,community=public),(host=exadb04.localhost.localdomain,port=3872,community=public))

It’s obvious that exadb02 shouldn’t be monitoring this target but it should be exadb04 instead. I believe that when I redeployed the Exadata plugin this agent wasn’t eligible to monitor Exadata targets any more and was replaced with another one but that’s just a guess.

There are two solutions for that problem:

1. Move (relocate) target definition and monitoring to the correct agent:

I wasn’t able to find a way to do that through OEM Console and for that purpose I used emcli. Based on MGMT$AGENTS_MONITORING_TARGETS query and snmpSubscriber attribute I was able to find which agent was configured initially and which have to be removed.  Then I used emcli to relocate the monitoring agent for that target to the correct agent, the one which was configured initially:
	
[oracle@oem ~]$ emcli relocate_targets -src_agent=exadb02.localhost.localdomain:3872 -dest_agent=exadb04.localhost.localdomain:3872 -target_name=exacel05.localhost.localdomain -target_type=oracle_exadata -copy_from_src
Moved all targets from exadb02.localhost.localdomain:3872 to exadb04.localhost.localdomain:3872

2. Reconfigure the cell to use the new monitoring agent:

Add the current monitoring agent ssh publickey into the authorized_keys of the cell:

Place the oracle user DSA public key (/home/oracle/.ssh/id_dsa.pub) from exadb02 into exacel05:/home/cellmonitor/.ssh/authorized_keys

and also change the cell snmpSubscriber attribute:

# cellcli -e "alter cell snmpSubscriber=((host=iormdb02-adm.apac.ent.bhpbilliton.net,port=3872,community=public),(host=iormdb01-adm.apac.ent.bhpbilliton.net,port=3872,community=public),(host=10.242.1.100,port=162,community=public,type=asr))"
Cell exacel05 successfully altered

[root@iormsc02-adm ~]# cellcli -e list cell attributes snmpSubscriber
         ((host=iormdb02-adm.apac.ent.bhpbilliton.net,port=3872,community=public),(host=iormdb01-adm.apac.ent.bhpbilliton.net,port=3872,community=public),(host=10.242.1.100,port=162,community=public,type=asr))


After that the status at OEM for the Exadata Storage Server (cell) target became up and also the metrics were fine now.

Recreate emcli configuration
cd /u01/app/oracle/product/12.1.0/emcli
cp emclikit.jar ..
cd ..
l
rm -rf emclikit.jar
mkdir -p /u01/app/oracle/product/12.1.0/emcli/emcli_dir
cp /u01/app/oracle/product/12.1.0/emclikit.jar /u01/app/oracle/product/12.1.0/emcli
cd /u01/app/oracle/product/12.1.0/emcli
java -jar emclikit.jar client -install_dir=/u01/app/oracle/product/12.1.0/emcli
./emcli setup -dir=/u01/app/oracle/product/12.1.0/emcli/emcli_dir -url="https://iorper-oms01:7802/em" -username=oem_admin -autologin -trustall
./emcli logout
./emcli login -username=oem_admin
./emcli sync

scp -p emclikit.jar iorsdb02-adm:/u01/app/oracle/product/12.1.0
scp -p emclikit.jar iorsdb01-adm:/u01/app/oracle/product/12.1.0

cd /u01/app/oracle/product/12.1.0/
rm -rf emcli
mkdir -p /u01/app/oracle/product/12.1.0/emcli/emcli_dir
cp /u01/app/oracle/product/12.1.0/emclikit.jar /u01/app/oracle/product/12.1.0/emcli
cd /u01/app/oracle/product/12.1.0/emcli
java -jar emclikit.jar client -install_dir=/u01/app/oracle/product/12.1.0/emcli
./emcli setup -dir=/u01/app/oracle/product/12.1.0/emcli/emcli_dir -url="https://iorper-oms01:7802/em" -username=oem_admin -autologin -trustall
./emcli logout
./emcli login -username=oem_admin
./emcli sync

LOG:
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
[oracle@IOMDC-LINT0004 EM]$ which java
/usr/bin/java
[oracle@IOMDC-LINT0004 EM]$ cd /u02/app/oracle/product/12.1.0.5/emcli
[oracle@IOMDC-LINT0004 emcli]$ ls
emcli_dir  emclikit.jar
[oracle@IOMDC-LINT0004 emcli]$ java -jar emclikit.jar client -install_dir=/u02/app/oracle/product/12.1.0.5/emcli
Oracle Enterprise Manager 12c Release 5.
Copyright (c) 2012, 2015 Oracle Corporation.  All rights reserved.

EM CLI client-side install completed successfully.
Execute "emcli help setup" from the EM CLI home (the directory where you have installed EM CLI) for further instructions.

[oracle@IOMDC-LINT0004 emcli]$ ./emcli setup -dir=/u02/app/oracle/product/12.1.0.5/emcli/emcli_dir -url="https://iomdc-lint0004:7802/em" -username=oem_admin -autologin -trustall
Oracle Enterprise Manager 12c Release 5.
Copyright (c) 1996, 2015 Oracle Corporation and/or its affiliates. All rights reserved.

Enter password

Emcli setup successful
[oracle@IOMDC-LINT0004 emcli]$ ./emcli logout
Logout successful
[oracle@IOMDC-LINT0004 emcli]$ ./emcli login -username=oem_admin
Login successful
[oracle@IOMDC-LINT0004 emcli]$ ./emcli sync
Synchronized successfully

You can then check the registered emcli clients in EM12c console
Click on Setup -> Command line Interface
Click on 'Registered clients'




------------------------------------------------------------------------------------------------------------------------------------------------------------

How to add/delete a rac database using emcli
Before adding a rac database, the instances of rac database should be added. So the parameters needed should already be identified with commands need, which is not mentioned in this Note.
In this usecase, following assumptions are made: 

Rac database name: racdb
Instances : racdb_1, racdb_2
Oracle Home : /u01/racdb/11202
dbsnmp password : welcome1
Nodes part of rac: test1.oracle.com, test2.oracle.com
VIP name : test2-vip1.oracle.com, test2-vip2.oracle.com
Cluster Name : emcluster
ServiceName : racdb

1. Adding RAC Database:

a. Add all instances of rac database using following command:

./emcli add_target -name=racdb_racdb_1 -type=oracle_database -host="test1.oracle.com" -credentials="UserName:dbsnmp;password:welcome1;Role:Normal" -properties="SID:racdb_1;Port:1521;OracleHome:/u01/racdb/11202;MachineName:test2-vip1.oracle.com"

./emcli add_target -name=racdb_racdb_2 -type=oracle_database -host="test2.oracle.com" -credentials="UserName:dbsnmp;password:welcome1;Role:Normal" -properties="SID:racdb_2;Port:1521;OracleHome:/u01/racdb/11202;MachineName:test2-vip2.oracle.com"
 b. Add Rac database using following command:

./emcli add_target -name="racdb" -type="rac_database" -host="test1.oracle.com" -monitor_mode="1" -properties="ServiceName:racdb;ClusterName:emcluster" -instances="racdb_racdb_1:oracle_database;racdb_racdb_2:oracle_database"
 2. Deleting RAC Database:

./emcli delete_target -name="racdb" -type="rac_database"

12c Cloud Control Showing Second Instance Down For RAC One Database After Relocation [ID 1476013.1] 
---------------------------------------------------------------------------------------------------------------------------
Symptoms
Add a RAC One Node database in 12c Cloud Control for monitoring. 

Say, node1 and node2 are the names of the machines and db1 is the database name. 
  
During initial discovery one instance and cluster database would be shown as up. 
Now relocate the instance from node1 to node2 using: 
 
srvctl relocate database -d db1 -n node2
 
Now two instances would be shown in home page of cluster. One with up status and other with down. This should not happen and always only one active instance should be shown.

Monthly Space Usage Report: 12c: RAC Database Targets are not Selectable when Running the Oracle Database Tablespace Monthly Space Usage Report in Enterprise Manager 12c Cloud Control with the 12.1.0.3 Database Plugin [ID 1593905.1] 
---------------------------------------------------------------------------------------------------------------------------
Symptoms
Selecting the out-of-box report Oracle Database Tablespace Monthly Space Usage report in Enterprise Manager 12.1.0.2 Cloud Control with the 12.1.0.3 Database Plugin on a target RAC database doesn't display the cluster database target type in the available targets list.

Cause
Unpublished Bug 16858631
 
Solution
Update the database plugin to version 12.1.0.4 (this will require Enterprise Manager upgrade to 12.1.0.3 from 12.1.0.2).

Alternatively, follow the steps below for fixing the issue on the 12.1.0.3 database plugin :

1. Refer to "How to deploy Plug-ins on Management Server..." from Doc ID 1394908.1
2. Choose the Oracle Database plug-in version 12.1.0.3 to deploy on the OMS.
3. Download the attached deleteStorageReports.sql file (provided in bug 16777759).
4. After the 12.1.0.3 DB plugin has been deployed on the OMS, then apply the following steps :

The next files need to be run as sysman in the repository.

Attachment: deleteStorageReports.sql
$MW_HOME/plugins/oracle.sysman.db.oms.plugin_12.1.0.3.0/sql/db/latest/reports/db_outofbox_elements.sql
$MW_HOME/plugins/oracle.sysman.db.oms.plugin_12.1.0.3.0/sql/db/latest/reports/storage/db_outofbox_storage.sql
$MW_HOME/plugins/oracle.sysman.db.oms.plugin_12.1.0.3.0/sql/db/latest/reports/storage/db_outofbox_storage_issues.sql
$MW_HOME/plugins/oracle.sysman.db.oms.plugin_12.1.0.3.0/sql/db/latest/reports/storage/db_space_used_alerts_enabled.sql

NOTE: They need to be run in that order. First sql deletes the current
version of the reports. The second creates the elements used by the other sql files.
$MW_HOME stands for the Middleware Home.

Is always recommended to create a backup before running any query that will change the database.

Failed TMJS1 : ORA-20247: EMD_URL is invalid:  Cannot provide null emd url.



$ emcli modify_target -name="CSMYAN-VODBP01" -type="host" -display_name="csmyan-vodbp01" -on_agent
Target "CSMYAN-VODBP01:host" modified successfully



emcli modify_target -name="CSMJIM-VODBP06" -type="host" -display_name="csmjim-vodbp06" -on_agent
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin
$ ./emcli add_target -name="PMYN1_01" -type="oracle_database" -host="csmyan-vodbp01" -credentials="UserName:dbsnmp;password:Swan#River1;Role:Normal" -properties="SID&PMYN1;Port&1521;OracleHome&"D:\app\oracle\product\11.2.0.4\db_000";MachineName&CSMYAN-VODBP01" -subseparator=properties="&"
Error: Cannot save the target to the agent
ORA-20247: EMD_URL is invalid:  Cannot provide null emd url.

oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin
$ ./emcli add_target -name="PMYN1_01" -type="oracle_database" -host="CSMYAN-VODBP01" -credentials="UserName:dbsnmp;password:Swan#River1;Role:Normal" -properties="SID&PMYN1;Port&1521;OracleHome&"D:\app\oracle\product\11.2.0.4\db_000";MachineName&CSMYAN-VODBP01" -subseparator=properties="&"
Error: Target already exists in repository
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin
$ ./emcli delete_target -name="PMYN1_01" -type="oracle_database"
Target "PMYN1_01:oracle_database" deleted successfully
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin
$ ./emcli delete_target -name="PMYN1_01_sys" -type="oracle_dbsys"
Error: Target does not exist
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin
$ ./emcli add_target -name="PMYN1_01" -type="oracle_database" -host="CSMYAN-VODBP01" -credentials="UserName:dbsnmp;password:Swan#River1;Role:Normal" -properties="SID&PMYN1;Port&1521;OracleHome&"D:\app\oracle\product\11.2.0.4\db_000";MachineName&CSMYAN-VODBP01" -subseparator=properties="&"
Target "PMYN1_01:oracle_database" added successfully
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin

The correct host name may be retrieved with this command:

emctl status agent
Check the Agent URL value from the output:

Agent URL : https://myoracle.oracle.com:3872/emd/main/
Agent URL              : https://10.113.164.20:3872/emd/main/

Enter this value with the -host parameter in the add-target command (example):

./emcli add_target -name="<target_name>" -type="oracle_database" -host="myoracle.oracle.com" -credentials="UserName:dbsnmp;password:<password>;Role:Normal" -properties="SID:<sid>;Port:<>port;OracleHome:<oracle_home>;MachineName:<machine name>"


WONDOWS
--------------------
oracle@csmsdc-vmnapp01::/app/oracle/Middleware/oms/bin
1. From the host where the problem database target is running, please do the following: 
- Run the following commands: 
cd <AGENT_HOME>\bin 
echo "==== STATUS ======================================================" > agentdetails.txt 
emctl status agent > agentdetails.txt 
echo "==== UPLOAD ======================================================" >> agentdetails.txt 
emctl upload agent >> agentdetails.txt 
echo "==== TARGETS =====================================================" >> agentdetails.txt 
emctl config agent listtargets >> agentdetails.txt 
echo "==== PLUG-INS ====================================================" >> agentdetails.txt 
emctl listplugins agent -type all >> agentdetails.txt 
echo "==== Host Info ====================================================" >> agentdetails.txt 
hostname >> agentdetails.txt 

echo "==== END ====================================================" >> agentdetails.txt 

- Upload the agentdetails.txt file 

2. Upload the C:\Windows\System32\drivers\etc\hosts file 

3. Do you have a static IP address for your database host or is the host using DHCP to get its IP address? 

4. How does your hosts resolves IP addresses? Is it using the hosts file or DNS? 

5. At the host where the database target is running, 
- Backup or copy the agent's <EMSTATE>\sysman\config\emd.properties file. 
Note: <EMSTATE> is the Agent instance directory and is obtained by running the following command: 
<AGENT_HOME>/bin/emctl getemhome 
E:\oracle\agent12c\agentinst\sysman\config
- enable agent side PERL DEBUG by finding the parameter EMAGENT_PERL_TRACE_LEVEL in <EMSTATE>\sysman\config\emd.properties file and setting it to DEBUG. 
For example : 
EMAGENT_PERL_TRACE_LEVEL=DEBUG 
- Stop the agent, 
- Backup and then delete all files from <EMSTATE>/sysman/log directory, 
- Start the agent, wait until it is shown as up on the console 
- Run the following commands: 
<AGENT_HOME>/bin/emctl setproperty agent -name "Logger.log.level" -value 'DEBUG' 
<AGENT_HOME>/bin/emctl setproperty agent -name "Logger.log.totalSize" -value 1000 

6. At the OMS server, do the following: 
- Go to OMS's bin directory 
cd <OMS_HOME>/bin 
- Get or copy the original location and name of OMS trace file 
./emctl get property -sysman_pwd <password> -name log4j.appender.emtrcAppender.File 
(or run the following command to get the current Settings: 
./emctl list properties -sysman_pwd <sysman's password> | grep log4j.rootCategory 

- Set the preferred location and name of new OMS trace file 
./emctl set property -sysman_pwd <password> -name log4j.appender.emtrcAppender.File -value "<preferred full path>/emoms_debug.trc" -module logging 
- Enable debug tracing of OMS 
./emctl set property -sysman_pwd <password >-name log4j.rootCategory -value "DEBUG, emlogAppender, emtrcAppender" -module logging 

7. Reproduce the error. 

8. After reproducing the error collect the following into a single zip or archive file: 
From oms side: 
<preferred full path>/emoms_debug.trc 

From agent side: 
<EMSTATE>/sysman/log/* 
<EMSTATE>/sysman/emd/targets.xml 

9. Disable OMS debug tracing: 
cd <OMS_HOME>/bin 
./emctl set property -sysman_pwd <password >-name log4j.rootCategory -value "WARN, emlogAppender, emtrcAppender" -module logging 
./emctl set property -sysman_pwd <password> -name log4j.appender.emtrcAppender.File -value "<original full path>/emoms.trc" -module logging 

10. Disable Agent's debug tracing: 
Restore the backup of <EMSTATE>/sysman/config/emd.properties file 
Reload or restart the agent 

./emcli list_plugins_on_server

https://10.113.95.146:3872/emd/browser/main



Hosts exists status check in the repository

In OEM Repository host, run SQL*Plus, login to the EM repository database as sysman user then run the following commands: 
- set markup html on spool on 
- spool /tmp/report.html 
- select TARGET_NAME target 
, decode(MANAGE_STATUS,2,'Managed',MANAGE_STATUS) status 
, HOST_NAME host 
, EMD_URL 
from mgmt_targets 
where TARGET_TYPE = 'host' 
and (TARGET_NAME in ('10.113.95.146', 'CSMJIM-VODBP05') or TARGET_NAME like 'CSMJIM%');
- spool off 
- set markup html off 

RENAME AGENT TARGET and OMS TARGET

C:\app\oracle\product\12.1.0\agent\core\12.1.0.4.0\bin>emctl config agent listtargets
Oracle Enterprise Manager Cloud Control 12c Release 4
Copyright (c) 1996, 2014 Oracle Corporation.  All rights reserved.
[10.113.95.240, host]
[10.113.95.240:3872, oracle_emd]
[agent12104_2_10.113.95.240, oracle_home]
[TMJS1_01, oracle_database]
[OraDb11g_home4_11_10.113.95.240, oracle_home]
[LISTENER_10.113.95.240, oracle_listener]

Login successful
$ emcli modify_target -name="10.113.95.240" -type="host" -display_name="csmjim-vodbq01" -on_agent

ping "10.113.95.146" -type="host" -display_name="csmjim-vodbp05" -on_agent

Now: 
However, we have already done this manual agent name change.
To accomplish this, you will need to edit the PACKAGE BODY SYSMAN.EM_TARGET. Make a backup of the code and apply the changes:
From:

     -- we will implement rename of agent side targets when it is fully
     -- supported by agent
    IF ( l_trec.manage_status = MANAGE_STATUS_MANAGED AND
         l_trec.emd_url IS NOT NULL) 
    THEN
      raise_application_error(MGMT_GLOBAL.INVALID_PARAMS_ERR,
          MGMT_GLOBAL.INVALID_PARAMS_ERR||' Not allowed') ;
    END IF ;
To:

     -- we will implement rename of agent side targets when it is fully
     -- supported by agent
    IF ( l_trec.manage_status = MANAGE_STATUS_MANAGED AND
         l_trec.emd_url IS NOT NULL) 
    THEN
      --raise_application_error(MGMT_GLOBAL.INVALID_PARAMS_ERR,
      --    MGMT_GLOBAL.INVALID_PARAMS_ERR||' Not allowed') ;
	  null;
    END IF ;
Now recompile the package and any dependent invalid object:

SYS@POEM1 SQL> EXEC sys.UTL_RECOMP.recomp_serial('SYSMAN');

PL/SQL procedure successfully completed.

$ emcli sync
Synchronized successfully
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin
HOST: 
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin
$ emcli rename_target -target_type="host" -target_name="10.113.95.240" -new_target_name="csmjim-vodbq01"
Target 10.113.95.240 successfully renamed to csmjim-vodbq01.
emcli rename_target -target_type="host" -target_name="10.113.95.146" -new_target_name="csmjim-vodbp05"

AGENT:
./emcli get_targets -targets="csmyan-vodbp01:%"                                            
  HOST  CSMYAN-VODBP01
oracle_emd            csmyan-vodbp01:3872
AGENT:
1       Up               oracle_emd            10.113.77.34:3872

$ emcli modify_target -name="10.113.77.34:3872" -type="oracle_emd" -display_name="csmjim-vodbp01:3872" -on_agent

Target "10.113.77.34:3872:oracle_emd" modified successfully
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin
$ emcli rename_target -target_type="oracle_emd" -target_name="10.113.77.34:3872" -new_target_name="csmjim-vodbp01:3872"
Target 10.113.77.34:3872 successfully renamed to csmjim-vodbp01:3872.


BACKUP Software Library
oracle@csmsdc-vmnapp01::/app/oracle/Middleware/oms/bin
$ ./emcli login -username=SYSMAN
$ ./emctl partool check
Enter Repository password :
Setup is ready for import/export of PAR files

oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/emcli_sm

$ ./emcli get_procedures | grep -i BHPB
GUID                              Type                            		Name                          		 DisplayName             						Version  Owner      Parent Procedure
2B7A680AB46D042FE0531084F10A5B7D  UserDefined   DP_29AC05D329ED7151E0531084F10A54CB  BHPB - Create Oracle Database                            1.23     OEM_ADMIN
2A6FC3FE331D31CBE0531084F10A030E  UserDefined   DP_2A657F7213E1367CE0531084F10A2240  BHPB - Create Pluggable Database from Non-CDB database   1.5      OEM_ADMIN
2A6FC3FE32A531CBE0531084F10A030E  UserDefined   DP_2A23D721A2D5191EE0531084F10AD637  BHPB - Create Pluggable Database                         1.4      OEM_ADMIN
29A8194EBD270E1CE0531084F10A73D6  DBConfig      DP_1447871FEF5A5422E0531084F00A2528  BHPB - Create Oracle Database - old                      1.15     SYSMAN
29584D5BC442631AE0531084F10A1556  UserDefined   DP_1447871FEF205422E0531084F00A2528  BHPB - Delete Oracle Database                            1.4      SYSMAN
27600A82F4E61BCBE0531084F10AEE99  UserDefined   DP_15390FEC6B4E028CE0531084F00A82E1  BHPB - Delete Standby Database                           1.7      SYSMAN
27600A82F4CE1BCBE0531084F10AEE99  UserDefined   DP_15EEE7E2F0F616F8E0531084F00A15A6  BHPB - Create RAC-Service                                1.5      SYSMAN
27600A82F4C21BCBE0531084F10AEE99  UserDefined   DP_14E8D83B4A9A696DE0531084F00A9360  BHPB - Create Standby Database                           1.27     SYSMAN
27600A82F4B61BCBE0531084F10AEE99  UserDefined   DP_199EFFCA99F55C8CE0531084F00AAA41  BHPB - Duplicate Exadata Oracle Database                 1.21     OEM_ADMIN


$ emcli login -username=SYSMAN
Enter password :

Login successful
oracle@iorper-oms01:OMS:/home/oracle
$ emctl partool check
Oracle Enterprise Manager Cloud Control 12c Release 4
Copyright (c) 1996, 2014 Oracle Corporation.  All rights reserved.
Enter Repository password :
Setup is ready for import/export of PAR files
$ emcli get_procedures | grep -i BHPB


C.4.2 Creating PAR File
To create a PAR file that contains one or more Deployment Procedures, run the emctl partool utility with the export option as the action, and quote the GUIDs of the Deployment Procedures you want to export. Ensure that you separate the GUIDs by a comma.

$ORACLE_HOME/bin/emctl partool export -guid <GUID> -file exportedDP.par -displayName "User exported DP" -description "<description>"


$ emctl partool export -guid "2B7A680AB46D042FE0531084F10A5B7D" -file "/tmp/Create_Oracle_Database.par" -displayName "DP_29AC05D329ED7151E0531084F10A54CB" -description "create_Oracle_Database" -repPasswd Oracle#123
Oracle Enterprise Manager Cloud Control 12c Release 4
Copyright (c) 1996, 2014 Oracle Corporation.  All rights reserved.

        waiting for the zip process to complete...
OUTPUT>  adding: META-INF/par.xml (deflated 47%)
OUTPUT>  adding: procedures/procedure_001.xml (deflated 87%)
OUTPUT>  adding: swlib/binaries/1447871FEF685422E0531084F00A2528_0.2_postdb_mod_oratab.pl (deflated 72%)
OUTPUT>  adding: swlib/binaries/1447871FEF8A5422E0531084F00A2528_0.3_postdb_config_rman.pl (deflated 60%)
OUTPUT>  adding: swlib/binaries/1447871FEF925422E0531084F00A2528_0.2_postdb_mod_db_cred_in_em.pl (deflated 65%)
OUTPUT>  adding: swlib/binaries/1447871FEF825422E0531084F00A2528_0.1_set_adr_policies.pl (deflated 55%)
OUTPUT>  adding: swlib/binaries/19EF3CD6931A5410E0531084F00A7150_0.1_cloneDB_create_rman_backup.pl (deflated 54%)
OUTPUT>  adding: swlib/binaries/1447871FEF965422E0531084F00A2528_0.2_postdb_stop_blackout.pl (deflated 68%)
OUTPUT>  adding: swlib/binaries/29AB8298344166D7E0531084F10A5132_0.1_create_database.sh (deflated 82%)
OUTPUT>  adding: swlib/binaries/1447871FEF785422E0531084F00A2528_0.4_postdb_mod_restart_db.pl (deflated 64%)
OUTPUT>  adding: swlib/binaries/1447871FEF705422E0531084F00A2528_0.2_postdb_mod_target_db.pl (deflated 74%)
OUTPUT>  adding: swlib/binaries/1447871FEF865422E0531084F00A2528_0.3_postdb_create_rac_services.pl (deflated 75%)
OUTPUT>  adding: swlib/binaries/1447871FEF7D5422E0531084F00A2528_0.2_mod_static_sidlist.pl (deflated 81%)
OUTPUT>  adding: swlib/binaries/1449FCDF7E106C25E0531084F00A05DC_0.9_predb_check_parameters.pl (deflated 76%)
OUTPUT>  adding: swlib/binaries/146F5E1ACC882A4EE0531084F00AF8FE_0.3_postdb_apply_target_properties.pl (deflated 72%)
--
OUTPUT>  adding: swlib/documents/properties1447871FEF825422E0531084F00A2528_0.1 (deflated 66%)
Return code = 0
Export of the user procedure was successful. Corresponding PAR file is stored as "/tmp/Create_Oracle_Database.par"

 /u01/app/oracle/product/12.1.0/middleware/oms/bin/emctl partool export -guid "1BD74E330B0B2F77E0531084F00A71B0" -file "./backups/BHPB_-_Duplicate_Exadata_Oracle_Database.par" -displayName "DP_1BCDAEE01E546830E0531084F00A6FD3" -description "BHPB_-_Duplicate_Exadata_Oracle_Database" -repPasswd Oracle#123

  /u01/app/oracle/product/12.1.0/emcli_sm/emcli|grep proc
   /u01/app/oracle/product/12.1.0/emcli_sm/emcli get_procedures
 /u01/app/oracle/product/12.1.0/emcli_sm/emcli get_procedures|grep -i BHPB
 /u01/app/oracle/product/12.1.0/middleware/oms/bin/emctl partool export -guid "1A3F8ACEAEDF1187E0531084F00A6717" -file "./backups/BHPB_-_Duplicate_Exadata_Oracle_Database.par" -displayName "DP_199EFFCA99F55C8CE0531084F00AAA41" -description "BHPB_-_Duplicate_Exadata_Oracle_Database" -repPasswd Oracle#123
 /u01/app/oracle/product/12.1.0/middleware/oms/bin/emctl partool export -guid "1A3F8ACEAE951187E0531084F00A6717" -file "./backups/BHPB_-_Create_Standby_Database.par" -displayName "DP_14E8D83B4A9A696DE0531084F00A9360" -description "BHPB_-_Create_Standby_Database" -repPasswd Oracle#123
 /u01/app/oracle/product/12.1.0/middleware/oms/bin/emctl partool export -guid "17BE306266AC754BE0531084F00A785F" -file "./backups/BHPB_-_Create_RAC-Service.par" -displayName "DP_15EEE7E2F0F616F8E0531084F00A15A6" -description "BHPB_-_Create_RAC-Service" -repPasswd Oracle#123
 /u01/app/oracle/product/12.1.0/middleware/oms/bin/emctl partool export -guid "1796086D199C6595E0531084F00AC410" -file "./backups/BHPB_-_Create_Oracle_Database.par" -displayName "DP_1447871FEF5A5422E0531084F00A2528 " -description "BHPB_-_Create_Oracle_Database" -repPasswd Oracle#123
 /u01/app/oracle/product/12.1.0/middleware/oms/bin/emctl partool export -guid "170AD0F3FCF20CE1E0531084F00AB08D" -file "./backups/BHPB_-_Delete_Standby_Database.par" -displayName "DP_15390FEC6B4E028CE0531084F00A82E1" -description "BHPB_-_Delete_Standby_Database" -repPasswd Oracle#123
 /u01/app/oracle/product/12.1.0/middleware/oms/bin/emctl partool export -guid "170AD0F3FCE60CE1E0531084F00AB08D" -file "./backups/BHPB_-_Delete_Oracle_Database.par" -displayName "DP_1447871FEF205422E0531084F00A2528" -description "BHPB_-_Delete_Oracle_Database" -repPasswd Oracle#123
 l

locate *.par
-rw-r----- 1 oracle oinstall 253047 Nov  5 16:28 BHPB_-_Duplicate_Exadata_Oracle_Database.par
-rw-r----- 1 oracle oinstall  92150 Nov  5 16:33 BHPB_-_Create_Standby_Database.par
-rw-r----- 1 oracle oinstall   5576 Nov  5 16:34 BHPB_-_Create_RAC-Service.par
-rw-r----- 1 oracle oinstall  48779 Nov  5 16:35 BHPB_-_Create_Oracle_Database.par
-rw-r----- 1 oracle oinstall  33163 Nov  5 16:36 BHPB_-_Delete_Standby_Database.par
-rw-r----- 1 oracle oinstall  28226 Nov  5 16:36 BHPB_-_Delete_Oracle_Database.par

C.5.1.1 Importing Specific PAR File
To import or deploy a specific PAR file, run the following command:

$ORACLE_HOME/bin/emctl partool deploy -parFile $ORACLE_HOME/sysman/prov/paf/<par_file_name>

For example:

$ORACLE_HOME/bin/emctl partool deploy -parFile $ORACLE_HOME/sysman/prov/paf/asprov.par

Others:
oracle@iorper-oms01::/em12c_swlib/software
DBSERVER: ACFS   software mountpoint

---------------------------------------  JOB -----------------------------

. First we describe the job type to get the list of required inputs

./emcli describe_job_type 
        -job_type=discoverPromoteOHTargets  > inputs.prop
emcli create_job -input_file=property_file:inputs.prop

emcli get_jobs -name=PROMOTE_OH

emcli get_job_execution_detail 
      -execution=<Execution ID from above> -xml -showOutput

$ ./emcli describe_job_type -job_type=discoverPromoteOHTargets

# Description: (Optional) The user specified name of the job
name=

# Description: (Optional) The job type for this job
type=discoverPromoteOHTargets

# Description: (Optional) The user specified description of the job
description=

# Description: The job owner. The job owner is the user who creates the job.
# Default: the logged in user
# The job owner information displayed here is for documentation only and user is not expected to change it.
owner=

# Description: (Optional) The kind of job
# Legal Values: active, library
kind=


# Fill in the target list before submitting.
# For Example:
#     target_list=MyTarget:cluster
target_list=<target_name>:<target_type>


# Description: The type of targets to use for this job
targetType=host

# Description: (Required) Enter the action you want to perform.To run only discovery on the target, use : disc.To run discovery and promotion on target to managed status, use : promote
variable.loc_action=

# Description: (Required) Enter the type of search to be performed. All the homes in the Inventory/Middleware Home will be managed.For discovering Oracle Home, use : oh.For discovering Oracle Home's in inventory , use : inv.For discovering Oracle Home's in middleware home, use : mwh
variable.loc_type=

# Description: (Optional) Enter Path to Oracle Home/Inventory/Composite Home/Middleware Home you want to manage.
variable.location=


# Description: (Optional) Notify the job owner when a selected state occurs
# Allowed Values:  SCHEDULED, RUNNING, ACTION_REQUIRED, SUSPENDED, SUCCEEDED, PROBLEMS
notification=

emcli help verb
emcli help

$ ./emcli help clone_database_home
    emcli clone_database_home
       -input_file="dest_properties:file_path"
       -list_exclude_files="list of files to exclude"
       -isSwLib="true/false"
       -isRac="true/false"
       -tryftp_copy="true/false"
       -jobname="name of cloning job"
       [-home_name="name of home to use when creating RAC cluster"]
       [-home_location="location of home when creating RAC cluster"]
       [-prescripts="script name to execute"]
       [-run_prescripts_as_root="true/false"]
       [-postscripts="script to execute"]
       [-run_postscripts_as_root="true/false"]
       [-rootscripts="script name to execute"]
       [-swlib_component ="path:path to component;version:rev"]
       [-source_params="TargetName:name;HomeLoc:loc;HomeName:name;ScratchLoc:Scratch dir Location"]
       [-jobdesc="description"]

$ ./emcli help create_job

emcli create_job
   [-name="job name"]
   [-type="job type"]
    -input_file=property_file:"filename"

Description:
    Create and schedule a job.

Options:
    -name:       Optional parameter. The name of the job.
    -type:       Optional parameter. The job type.
    -input_file: Required parameter. "filename" must be provided to load
                 the properties for creating and scheduling the job.

Note: For more information on input files, see emcli command line help:
    emcli help job_input_file

Examples:

emcli create_job -name=MYJOB1 -type=MyJobType1 -input_file=property_file:/tmp/myjob1_prop.txt
    Create and schedule a job named MYJOB1 of job type MyJobType1
    with properties from /tmp/myjob1_prop.txt

emcli create_job -input_file=property_file:/tmp/myjob1_prop.txt
    Create a job with name, type and other properties specified in the file.

Note: If the name or type is specified both on the command line
and in the property file, the command line value is used.



I think it will be better if you use parameter file for passing paramerts as below: 

1.emcli login
2. Use emcli command to redirect the output to a file for getting passing parameter information: 
emcli describe_job_type -type=clone_database_home > /tmp/clone_db_properties.txt
3.open the created file and add all of the required information [Please update as you passing all the parameters
vi /tmp/clone_db_properties.txt
 

4. execute the job
emcli create_job -input_file=property_file:/tmp/clone_db_properties.txt

5. Check the job progress
emcli get_jobs -name=am623_of_cloning_job    --name value from parameter file


emcli get_jobs -status=2

Get execution id from above 

emcli get_job_execution_detail -execution=E41802045F6F1C9EE040007F01002122 -xml -showOutput | grep '^ -' 


YOu can have a look below link
http://www.bluemedora.com/blog/provisioning-vmware-virtual-machines-from-emcli-in-less-than-10-minutes/

Create  Report
$EMCLI_HOME/emcli get_targets -targets="${DB_TARGET}:oracle_database;${LSN_TARGET}:oracle_listener"

emcli execute_sql -sql="select host_name from sysman.mgmt_targets where target_name = '${DB_TARGET}'" -targets="${EMDB}:oracle_database" -credential_set_name="DBCredsSYSDBA"|grep $DOMAIN`


TRACE:

1) 
Enable OMS DEBUG 
cd <OMSHome>/bin 
./emctl set property -name log4j.rootCategory -value 'DEBUG, emlogAppender, emtrcAppender' -module logging 

Enable Agent DEBUG on Target Server (PBDW1_01_PBDW12) 
cd <AgentHome>/bin 
$ emctl setproperty agent -name 'Logger.log.level' -value 'DEBUG' 

Note the time in the OMS Server. Capture the output of the 'date' command and post in the SR 
Reproduce the issue 
EM Console / Target / Databases / Performance / AWR Warehouse 
Select the database (PBDW1_01_PBDW12) / Click Actions >> Upload Snapshot now 

After completion, collect the below logs 

From OMS Server, zip and upload only recent logs from 
../gc_inst/em/EMGC_OMS1/sysman/log/ 

From target server, zip and upload 
../agent_inst/sysman/log/* 

2) Change the log level 

OMS Server : 
./emctl set property -name log4j.rootCategory -value 'WARN, emlogAppender, emtrcAppender' -module logging 

Agent Server 
./emctl setproperty agent -name 'Logger.log.level' -value 'INFO' 

EXPORT/IMPORT JOB
==============
oracle@iorper-oms01::/home/oracle
$ OMS
The Oracle base for ORACLE_HOME=/u01/app/oracle/product/12.1.0/middleware/oms is
XPointer evaluation failed: no locset
oracle@iorper-oms01:OMS:/home/oracle
$ oh
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms
$ cd bin
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin
$ ./emcli login -username=SYSMAN
Enter password :

Login successful
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin
$ ./emcli help | grep job
    config_compare  Submits the configuration comparison job
    verify_adm            -- Submit an application data model verify job for the target specified.
    create_job               -- Create a job
    create_job_from_library  -- Create a job using a library job as a template
    create_library_job       -- Create a library job
    delete_job               -- Delete the specified job
    delete_library_job       -- Delete a library job
    describe_job             -- Describe a job
    describe_job_type        -- Describe a job type
    describe_library_job     -- Describe a library job
    export_jobs              -- Export job details in to an xml file
    get_job_execution_detail -- Display details of job execution
    get_job_types            -- Lists all job types supported by EMCLI
    get_jobs                 -- Get a list of existing jobs
    import_jobs              -- Import job definitions from an xml file
    job_input_file           -- Supply details for a job verb in a property file
    resume_job               -- Resume a job or set of jobs
    retry_job                -- Restart a previously failed job execution
    stop_job                 -- Stop the specified job
    submit_job               -- Submit a job (Deprecated - use create_job)
    suspend_job              -- Suspend a job or set of jobs
    submit_masking_job                    -- Submit a masking job ,display job id and execution id
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin
$  ./emcli export_jobs -preview
Internal error has occurred. More information is available in the OMS logs.
The following "394" Jobs match the filter criteria specified:

Job Name           Type           Owner           Notes
DISCOVERPDBENTITIES05-07-2016 06:50:22  DiscoverPDBEntities  SYSMAN    -
RMAN_P_DEL_ARCH_STBY.1  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-15-2016 09:59:34  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-22-2016 06:56:27  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-10-2016 06:56:28  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-15-2016 06:56:26  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES04-28-2016 04:18:16  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-26-2016 11:27:48  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-13-2016 11:25:26  DiscoverPDBEntities  SYSMAN    -
REFRESH_FROM_MY_ORACLE_SUPPORT_JOB  RefreshFromMetalink  SYSMAN    -
DISCOVERPDBENTITIES05-16-2016 06:50:21  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-22-2016 11:25:35  DiscoverPDBEntities  SYSMAN    -
BHPB_CHK_NEW_DB  OSCommand  CAMUH9    -
DISCOVERPDBENTITIES04-26-2016 03:39:38  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-14-2016 09:59:47  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-04-2016 04:18:17  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-15-2016 11:27:34  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-14-2016 11:27:33  DiscoverPDBEntities  SYSMAN    -
RMAN_P_BCK_ARCH_IORM  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-21-2016 09:58:13  DiscoverPDBEntities  SYSMAN    -
RMAN_BLH_BCK_ARCH.1  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-25-2016 11:25:42  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-09-2016 09:59:43  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-23-2016 09:58:05  DiscoverPDBEntities  SYSMAN    -
BHPB_CHANGE_PWD_DB  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-17-2016 09:58:13  DiscoverPDBEntities  SYSMAN    -
RMAN_P_BCK_ARCH.2  OSCommand  OEM_JOB_USER    -
RMAN_CHK_BACKUP_STATUS_MAIL.1  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-15-2016 06:52:23  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-13-2016 06:50:21  DiscoverPDBEntities  SYSMAN    -
RMAN_PMTR1_BCK_INCR_DAILY  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-19-2016 11:39:44  DiscoverPDBEntities  SYSMAN    -
BHPB_CAPACITY_PLANNING.1  OSCommand  OEM_JOB_USER    -
RMAN_NP_BCK_MAINTENANCE  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-22-2016 11:39:45  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-06-2016 11:39:44  DiscoverPDBEntities  SYSMAN    -
BHPB_CAPACITY_PLANNING_SITES_MSR  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-09-2016 09:58:15  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-08-2016 06:52:22  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-21-2016 11:25:37  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-08-2016 11:27:29  DiscoverPDBEntities  SYSMAN    -
RMAN_P_BCK_FULL_WEEKLY  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES04-29-2016 11:39:44  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-10-2016 05:55:29  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES04-30-2016 09:58:00  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-24-2016 09:59:41  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-13-2016 03:39:39  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-06-2016 05:55:29  DiscoverPDBEntities  SYSMAN    -
RMAN_PBDW1_BCK_ARCH  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-11-2016 05:55:29  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES04-29-2016 04:18:18  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-11-2016 11:27:38  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES04-30-2016 03:39:39  DiscoverPDBEntities  SYSMAN    -
BHPB_CAPACITY_PLANNING_REPORT.1  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-01-2016 04:18:17  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-23-2016 11:39:45  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-02-2016 04:18:17  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-19-2016 11:25:33  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES04-27-2016 09:58:03  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-09-2016 05:55:29  DiscoverPDBEntities  SYSMAN    -
RMAN_BLH_BCK_INCR_DAILY.1  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-22-2016 09:58:10  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-20-2016 06:56:28  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-23-2016 03:39:40  DiscoverPDBEntities  SYSMAN    -
EXA_CAP_PLANNING  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-23-2016 06:56:26  DiscoverPDBEntities  SYSMAN    -
RMAN_PSOC1_BCK_FULL_ADHOC  OSCommand  OEM_JOB_USER    -
RMAN_PBDW1_BCK_FULL_WEEKLY  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-13-2016 09:58:11  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-25-2016 06:52:23  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-08-2016 03:39:42  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-05-2016 09:58:04  DiscoverPDBEntities  SYSMAN    -
RMAN_CHK_BACKUP_STATUS_MAIL.2  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES04-28-2016 11:40:28  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-23-2016 11:25:55  DiscoverPDBEntities  SYSMAN    -
RMAN_NP_BCK_ARCH.1  OSCommand  OEM_JOB_USER    -
DISCOVERPDBENTITIES05-12-2016 05:55:29  DiscoverPDBEntities  SYSMAN    -
DISCOVERPDBENTITIES05-13-2016 05:55:31  DiscoverPDBEntities  SYSMAN    -
oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin

$  ./emcli export_jobs -preview
Internal error has occurred. More information is available in the OMS logs.
The following "394" Jobs match the filter criteria specified:

Note the actual output file is an xml that contains job metadata, but the export file is always archived and stored in a zip format. At this time, I am sure most would instinctively unzip the file and start perusing through its contents, but doing so would be analogous to removing the warranty void sticker of your new TV or Blue Ray player. Basically, attempts to manually modify the contents of the exported zip file is highly discouraged.

$ ./emcli export_jobs -export_file=/u01/export/all_regular_jobs.zip -owner=OEM_JOB_USER
Jobs exported to file "/u01/export/all_regular_jobs.zip" successfully

The following "100" Jobs were exported:

Job Name           Type           Owner           Status           Notes
RMAN_P_BCK_INCR_DAILY.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_BLH_BCK_ARCH  OSCommand  OEM_JOB_USER  Success    -
RMAN_P_DEL_ARCH_STBY.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_NP_BCK_INCR_DAILY.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_NP_BCK_FULL_WEEKLY  OSCommand  OEM_JOB_USER  Success    -
RMAN_P_BCK_MAINTENANCE.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_MGMT_BCK_FULL_WEEKLY  OSCommand  OEM_JOB_USER  Success    -
RMAN_BLH_BCK_INCR_DAILY  OSCommand  OEM_JOB_USER  Success    -
RMAN_PBDW1_BCK_INCR_DAILY  OSCommand  OEM_JOB_USER  Success    -
RMAN_PMTR1_BCK_ARCH.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_PMTR1_BCK_ARCH  OSCommand  OEM_JOB_USER  Success    -
RMAN_P_BCK_ARCH_IORM  OSCommand  OEM_JOB_USER  Success    -
RMAN_BLH_BCK_ARCH.1  OSCommand  OEM_JOB_USER  Success    -
BHPB_APPLY_TARGET_PROPS  OSCommand  OEM_JOB_USER  Success    -
RMAN_NP_DEL_ARCH_STBY  OSCommand  OEM_JOB_USER  Success    -
BHPB_SET_ADR_POLICIES_IORM  OSCommand  OEM_JOB_USER  Success    -
RMAN_P_BCK_ARCH  OSCommand  OEM_JOB_USER  Success    -
RMAN_P_DEL_ARCH_STBY  OSCommand  OEM_JOB_USER  Success    -
BHPB_CHANGE_PWD_DB  OSCommand  OEM_JOB_USER  Success    -
RMAN_MGMT_BCK_ARCH  OSCommand  OEM_JOB_USER  Success    -
BHPB_SET_ADR_POLICIES.2  OSCommand  OEM_JOB_USER  Success    -
BHPB_CAPACITY_PLANNING  OSCommand  OEM_JOB_USER  Success    -
BHPB_SET_ADR_POLICIES  OSCommand  OEM_JOB_USER  Success    -
RMAN_PMTR1_BCK_FULL_WEEKLY  OSCommand  OEM_JOB_USER  Success    -
RMAN_P_BCK_ARCH.2  OSCommand  OEM_JOB_USER  Success    -
BHPB_CHK_TARGET_PROPS  OSCommand  OEM_JOB_USER  Success    -
BHPB_PERF_METRIC_REPORT.2  OSCommand  OEM_JOB_USER  Success    -
RMAN_CHK_BACKUP_STATUS_MAIL.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_PBDW1_BCK_ARCH  OSCommand  OEM_JOB_USER  Success    -
RMAN_P_BCK_INCR_DAILY  OSCommand  OEM_JOB_USER  Success    -
BHPB_CAPACITY_PLANNING_REPORT  OSCommand  OEM_JOB_USER  Success    -
BHPB_UPDATE_NAMED_CRED  OSCommand  OEM_JOB_USER  Success    -
RMAN_PBDW1_BCK_MAINTENANCE  OSCommand  OEM_JOB_USER  Success    -
RMAN_MGMT_BCK_INCR_DAILY  OSCommand  OEM_JOB_USER  Success    -
RMAN_PMTR1_BCK_INCR_DAILY  OSCommand  OEM_JOB_USER  Success    -
RMAN_PMQ21_BCK_FULL_ADHOC  OSCommand  OEM_JOB_USER  Success    -
BHPB_CAPACITY_PLANNING.1  OSCommand  OEM_JOB_USER  Success    -
BHPB_MGMT_SET_ADR_POLICIES.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_NP_BCK_MAINTENANCE  OSCommand  OEM_JOB_USER  Success    -
BHPB_COPY_TNSNAMES_FILES  OSCommand  OEM_JOB_USER  Success    -
RMAN_P_BCK_FULL_WEEKLY.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_NP_BCK_FULL_WEEKLY.1  OSCommand  OEM_JOB_USER  Success    -
BHPB_MGMT_EMCLI_SYNC_CHK_AND_CORRECT  OSCommand  OEM_JOB_USER  Success    -
BHPB_CAPACITY_PLANNING_SITES_MSR  OSCommand  OEM_JOB_USER  Success    -
BHPB_CHK_TARGET_PROPS.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_CHK_BACKUP_STATUS_MAIL_SITE.1  OSCommand  OEM_JOB_USER  Success    -
BHPB_PERF_METRIC_REPORT  OSCommand  OEM_JOB_USER  Success    -
RMAN_PBDW1_BCK_FULL_WEEKLY  OSCommand  OEM_JOB_USER  Success    -
RMAN_P_BCK_FULL_WEEKLY  OSCommand  OEM_JOB_USER  Success    -
RMAN_P_BCK_MAINTENANCE  OSCommand  OEM_JOB_USER  Success    -
BHPB_CAPACITY_PLANNING_IORM  OSCommand  OEM_JOB_USER  Success    -
RMAN_MGMT_BCK_MAINTENANCE.1  OSCommand  OEM_JOB_USER  Success    -
BHPB_APPLY_TARGET_PROPS.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_CHK_BACKUP_STATUS_MAIL_SITE  OSCommand  OEM_JOB_USER  Success    -
RMAN_NP_DEL_ARCH_STBY.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_BLH_BCK_FULL_WEEKLY.1  OSCommand  OEM_JOB_USER  Success    -
BHPB_CAPACITY_PLANNING_SITES_BLH.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_PBDW1_BCK_ARCH  OSCommand  OEM_JOB_USER  Success    -
RMAN_PBDW1_BCK_INCR_DAILY  OSCommand  OEM_JOB_USER  Success    -
BHPB_CHK_EM12C_BLACKOUTS  OSCommand  OEM_JOB_USER  Success    -
BHPB_CAPACITY_PLANNING_REPORT.1  OSCommand  OEM_JOB_USER  Success    -
BHPB_EMCLI_SYNC_CHK_AND_CORRECT  OSCommand  OEM_JOB_USER  Success    -
RMAN_PMTR1_BCK_FULL_WEEKLY.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_PMTR1_BCK_MAINTENANCE.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_CHK_BACKUP_STATUS_MAIL  OSCommand  OEM_JOB_USER  Success    -
RMAN_PICP1_BCK_FULL_ADHOC  OSCommand  OEM_JOB_USER  Success    -
BHPB_MGMT_SET_ADR_POLICIES  OSCommand  OEM_JOB_USER  Success    -
RMAN_BLH_BCK_FULL_WEEKLY  OSCommand  OEM_JOB_USER  Success    -
RMAN_MGMT_BCK_ARCH.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_BLH_BCK_INCR_DAILY.1  OSCommand  OEM_JOB_USER  Success    -
BHPB_COPY_TNSNAMES_FILES_IORM  OSCommand  OEM_JOB_USER  Success    -
RMAN_PBDW1_BCK_MAINTENANCE  OSCommand  OEM_JOB_USER  Success    -
RMAN_MGMT_BCK_MAINTENANCE  OSCommand  OEM_JOB_USER  Success    -
BHPB_CHK_EM12C_BLACKOUTS.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_P_BCK_INCR_DAILY_IORM  OSCommand  OEM_JOB_USER  Success    -
EXA_CAP_PLANNING  OSCommand  OEM_JOB_USER  Success    -
BHPB_CAPACITY_PLANNING_SITES_MSR.1  OSCommand  OEM_JOB_USER  Success    -
BHPB_MGMT_CHANGE_PWD_DB  OSCommand  OEM_JOB_USER  Success    -
RMAN_P_BCK_FULL_WEEKLY_IORM  OSCommand  OEM_JOB_USER  Success    -
RMAN_PSOC1_BCK_FULL_ADHOC  OSCommand  OEM_JOB_USER  Success    -
RMAN_PBDW1_BCK_FULL_WEEKLY  OSCommand  OEM_JOB_USER  Success    -
RMAN_NP_BCK_MAINTENANCE.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_PMTR1_BCK_MAINTENANCE  OSCommand  OEM_JOB_USER  Success    -
RMAN_CHK_BACKUP_STATUS_MAIL.2  OSCommand  OEM_JOB_USER  Success    -
RMAN_PMTR1_BCK_INCR_DAILY.1  OSCommand  OEM_JOB_USER  Success    -
BHPB_CAPACITY_PLANNING_SITES_BLH  OSCommand  OEM_JOB_USER  Success    -
RMAN_CHK_BACKUP_STATUS_MAIL_SITE.2  OSCommand  OEM_JOB_USER  Success    -
BHPB_COPY_TNSNAMES_FILES.2  OSCommand  OEM_JOB_USER  Success    -
RMAN_NP_BCK_ARCH.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_MGMT_BCK_INCR_DAILY.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_MGMT_BCK_FULL_WEEKLY.1  OSCommand  OEM_JOB_USER  Success    -
RMAN_NP_BCK_INCR_DAILY  OSCommand  OEM_JOB_USER  Success    -
RMAN_NP_BCK_ARCH  OSCommand  OEM_JOB_USER  Success    -
BHPB_CHANGE_PWD_DB_IORM  OSCommand  OEM_JOB_USER  Success    -


Import Job Definitions
 ./emcli import_jobs -preview -import_file=/u01/export/all_regular_jobs.zip

https://blogs.oracle.com/oem/entry/em12c_release_4_job_system1


TEMPLATE BACKUP
==================
SYS@POEM1 SQL> connect sysman/Oracle#123
Connected.

SYSMAN@POEM1 SQL> select TEMPLATE_NAME , TARGET_TYPE from MGMT_TEMPLATES where TEMPLATE_NAME like '%ORA_DEV%'
  2  ;

ORA_DEV_DATABASE_INSTANCE_TEMPLATE
oracle_database

ORA_DEV_CLUSTER_DATABASE_TEMPLATE
rac_database

ORA_DEV_ASM_TEMPLATE
osm_instance

ORA_DEV_CLUSTER_ASM_TEMPLATE
osm_cluster

ORA_DEV_LISTENER_TEMPLATE
oracle_listener

ORA_DEV_HOST_TEMPLATE
host

ORA_DEV_CLUSTER_TEMPLATE
cluster

ORA_DEV_AGENT_TEMPLATE
oracle_emd

oracle@iorper-oms01:OMS:/u01/app/oracle/product/12.1.0/middleware/oms/bin

$ ./emcli export_template -name="ORA_DEV_DATABASE_INSTANCE_TEMPLATE" -target_type="oracle_database" > /u01/export/DEV_Database.xml

$ ./emcli export_template -name="ORA_DEV_CLUSTER_DATABASE_TEMPLATE" -target_type="rac_database" > /u01/export/DEV_Cluster_Database.xml

$ ./emcli export_template -name="ORA_DEV_ASM_TEMPLATE" -target_type="osm_instance" > /u01/export/ORA_DEV_ASM_TEMPLATE.xml

$ ./emcli export_template -name="ORA_DEV_CLUSTER_ASM_TEMPLATE" -target_type="osm_cluster" > /u01/export/ORA_DEV_CLUSTER_ASM_TEMPLATE.xml

$ ./emcli export_template -name="ORA_DEV_LISTENER_TEMPLATE" -target_type="oracle_listener" > /u01/export/ORA_DEV_LISTENER_TEMPLATE.xml

$ ./emcli export_template -name="ORA_DEV_HOST_TEMPLATE" -target_type="host" > /u01/export/ORA_DEV_HOST_TEMPLATE.xml

$ ./emcli export_template -name="ORA_DEV_CLUSTER_TEMPLATE" -target_type="cluster" > /u01/export/ORA_DEV_CLUSTER_TEMPLATE.xml

$ ./emcli export_template -name="ORA_DEV_AGENT_TEMPLATE" -target_type="oracle_emd" > /u01/export/ORA_DEV_AGENT_TEMPLATE.xml

./emcli export_template -name="ORA_PROD_DATABASE_INSTANCE_TEMPLATE" -target_type="oracle_database" > /u01/export/PROD_Database.xml

 ./emcli export_template -name="ORA_PROD_CLUSTER_DATABASE_TEMPLATE" -target_type="rac_database" > /u01/export/PROD_Cluster_Database.xml
 ./emcli export_template -name="ORA_PROD_ASM_TEMPLATE" -target_type="osm_instance" > /u01/export/ORA_PROD_ASM_TEMPLATE.xml

 ./emcli export_template -name="ORA_PROD_CLUSTER_ASM_TEMPLATE" -target_type="osm_cluster" > /u01/export/ORA_PROD_CLUSTER_ASM_TEMPLATE.xml

 ./emcli export_template -name="ORA_PROD_LISTENER_TEMPLATE" -target_type="oracle_listener" > /u01/export/ORA_PROD_LISTENER_TEMPLATE.xml

 ./emcli export_template -name="ORA_PROD_HOST_TEMPLATE" -target_type="host" > /u01/export/ORA_PROD_HOST_TEMPLATE.xml

 ./emcli export_template -name="ORA_PROD_CLUSTER_TEMPLATE" -target_type="cluster" > /u01/export/ORA_PROD_CLUSTER_TEMPLATE.xml

 ./emcli export_template -name="ORA_PROD_AGENT_TEMPLATE" -target_type="oracle_emd" > /u01/export/ORA_PROD_AGENT_TEMPLATE.xml
